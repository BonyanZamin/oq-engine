* Investigating performance and precision of the ps_grid_spacing approximation

We well analyze the Alaska model in the mosaic, ALS/in/job_vs30.ini,
with OQ_SAMPLE_SITES=.01 in order to keep the calculation time under control.
We will use cole as server.

$ oq --version
3.15.0-git209e74670b

** Exact run

| calc_229, maxmem=39.2 GB   | time_sec | memory_mb | counts    |
|----------------------------+----------+-----------+-----------|
| total classical            | 6_315    | 48.3      | 261       |
| get_poes                   | 2_258    | 0.0       | 751_060   |
| composing pnes             | 876.3    | 0.0       | 751_060   |
| computing mean_std         | 872.6    | 0.0       | 56_871    |
| iter_ruptures              | 527.7    | 0.0       | 123_678   |
| computing distances        | 370.7    | 0.0       | 2_956_531 |
| make_contexts              | 142.7    | 0.0       | 2_956_531 |

** Run with pointsource_distance=100

| calc_230, maxmem=37.1 GB   | time_sec | memory_mb | counts    |
|----------------------------+----------+-----------+-----------|
| total classical            | 3_947    | 42.1      | 256       |
| get_poes                   | 812.4    | 0.0       | 266_509   |
| iter_ruptures              | 525.0    | 0.0       | 123_678   |
| computing distances        | 431.9    | 0.0       | 4_874_777 |
| composing pnes             | 312.0    | 0.0       | 266_509   |
| computing mean_std         | 285.5    | 0.0       | 13_455    |
| make_contexts              | 212.3    | 0.0       | 4_874_777 |

Notice that "computing distances" and "make_contexts" are actually slower,
since there are more calls.

# oq compare uhs 229 230, excellent precision
+---------+-----------+----------+------+
| poe     | rms-diff  | max-diff | site |
+---------+-----------+----------+------+
| 0.00211 | 7.395E-04 | 0.00548  | 168  |
+---------+-----------+----------+------+

** Run with pointsource_distance=100,ps_grid_spacing=50

| calc_231, maxmem=34.2 GB   | time_sec | memory_mb | counts  |
|----------------------------+----------+-----------+---------|
| total classical            | 1_342    | 24.5      | 282     |
| iter_ruptures              | 523.6    | 0.0       | 3_473   |
| get_poes                   | 302.8    | 0.0       | 95_579  |
| computing distances        | 146.9    | 0.0       | 186_265 |
| composing pnes             | 114.1    | 0.0       | 95_579  |
| computing mean_std         | 103.9    | 0.0       | 4_912   |
| make_contexts              | 24.9     | 0.0       | 186_265 |

Now "computing distances" and "make_contexts" are really fast and
"iter_ruptures" becomes the dominating factor.

# oq compare uhs 229 231, still good precision
+---------+----------+----------+------+
| poe     | rms-diff | max-diff | site |
+---------+----------+----------+------+
| 0.00211 | 0.00154  | 0.01224  | 162  |
+---------+----------+----------+------+

** Run with pointsource_distance=75,ps_grid_spacing=25

| calc_232, maxmem=34.0 GB   | time_sec | memory_mb | counts  |
|----------------------------+----------+-----------+---------|
| total classical            | 1_277    | 23.8      | 257     |
| iter_ruptures              | 517.7    | 0.0       | 12_156  |
| get_poes                   | 212.7    | 0.0       | 65_328  |
| computing distances        | 152.7    | 0.0       | 467_358 |
| composing pnes             | 80.0     | 0.0       | 65_328  |
| computing mean_std         | 71.6     | 0.0       | 3_388   |
| make_contexts              | 36.5     | 0.0       | 467_358 |

We trade a minor speedup with a twice as worse precision.

# oq compare uhs 229 232, worse precision
+---------+----------+----------+------+
| poe     | rms-diff | max-diff | site |
+---------+----------+----------+------+
| 0.00211 | 0.00211  | 0.02506  | 237  |
+---------+----------+----------+------+
